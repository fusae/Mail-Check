# Email Configuration
email:
  imap_server: "imap.qq.com"
  imap_port: 993
  email_address: "your_email@qq.com"
  app_password: "your_app_password"

  # Email Rules
  rules:
    sender: "sender@example.com"
    subject_pattern: "新增.*条舆情信息"

# Notification Configuration
notification:
  provider: "wechat_work"

  # Enterprise WeChat Configuration
  wechat_work:
    webhook_url: "https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=YOUR_WEBHOOK_KEY"

  # Telegram Configuration (backup)
  telegram:
    bot_token: "YOUR_BOT_TOKEN"
    chat_id: "YOUR_CHAT_ID"  # Telegram群组ID（注意负数）
    message_prefix: "【舆情监控】"
    enable_html: true  # 启用HTML格式
    enable_markdown: true  # 启用Markdown格式
    enable_preview: true  # 启用链接预览

  # Optional: ServerChan backup (send to both)
  # serverchan:
  #   sendkey: "YOUR_SERVERCHAN_SENDKEY"

# AI Configuration
ai:
  provider: "zhipu"
  model: "glm-4"
  api_key: "YOUR_API_KEY"
  api_url: "https://open.bigmodel.cn/api/paas/v4/chat/completions"

  # AI Judgment Parameters
  temperature: 0.3
  max_tokens: 500

# Sentiment API Configuration
sentiment:
  base_url: "https://console.microvivid.com/prod-api/system"
  negative_prob_threshold: 0.7

# Runtime Configuration
runtime:
  check_interval: 300
  log_level: "DEBUG"
  log_file: "logs/sentiment_monitor.log"
  database_engine: "mysql"
  mysql:
    host: "127.0.0.1"
    port: 3306
    user: "mail-check"
    password: "CHANGE_ME"
    # 推荐用下划线，避免部分工具/脚本对 "-" 的兼容问题；如你已创建 mail-check 也可以继续用。
    database: "mail_check"
  # 事件归并（重复舆情）
  event_dedupe:
    enabled: true
    window_days: 7
    max_distance: 4

# Feedback Configuration
feedback:
  enable_rules: true
  enable_few_shot: true
  rules_min_confidence: 0.7
  max_few_shot: 5
  link_base_url: "http://<服务器地址>:<API端口>/feedback"
  link_secret: "CHANGE_THIS_TO_RANDOM_SECRET"
  link_expiry_seconds: 86400

# Browser Configuration
browser:
  headless: true
  timeout: 30000
  # 优先使用纯HTTP抓取页面内容提取舆情ID（CentOS 7 / glibc 2.17 环境下 Playwright 通常无法启动）
  prefer_http: true
  # HTTP提取失败时是否允许用 Playwright 兜底
  allow_playwright_fallback: true
